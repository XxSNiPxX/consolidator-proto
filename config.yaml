mode:
  shard_strategy: global
  enable_combined_ticks: false

exchanges:
  - name: hyperliquid
    kind: hyperliquid
    network: mainnet
    subscriptions:
      books: ["@107", "BTC"]
      trades: ["HYPE"]
    options:
      ping_interval_ms: 15000
      read_timeout_ms: 30000
      max_message_bytes: 1048576

# Top-level Deribit config (matches AppConfig.deribit)
deribit:
  ws_url: "wss://www.deribit.com/ws/api/v2"
  books: ["BTC-PERPETUAL", "ETH-PERPETUAL"]
  trades: ["BTC-PERPETUAL"]
  client_id: ""
  client_secret: ""
  private: false

# Top-level Binance config (matches AppConfig.binance)
binance:
  ws_url: "wss://stream.binance.com:9443/ws"
  books: ["btcusdt", "ethusdt", "bnbusdt"]
  trades: ["btcusdt", "ethusdt", "bnbusdt"]

# You still need this for AppConfig
combiners: []

mmap:
  path: ./data/global.mm
  bytes: 1073741824 # 1GB
  mode: ring
  format: bincode
  header:
    magic: "MDLG"
    version: 1
    embed_catalog: true
  flush:
    bytes: 1048576
    interval_ms: 500
  channel:
    bound_records: 100000
    on_overflow: drop_oldest

reconnect:
  base_delay_ms: 500
  max_delay_ms: 30000
  jitter: 0.20
  heartbeat_ms: 15000
  read_idle_timeout_ms: 30000
  reset_backoff_after_ms: 60000

secrets:
  private_keys: []
  api_keys: []

logging:
  path: ./logs/consolidator.log
  level: debug
  format: text
  also_stdout: true

catalog:
  sources:
    - { id: 1, name: hyperliquid, network: mainnet }
    - { id: 2, name: deribit, network: mainnet }
    - { id: 3, name: binance, network: mainnet }

  instruments:
    # Hyperliquid
    - { id: 1001, exchange: hyperliquid, symbol: "@107", channel: book }
    - { id: 1002, exchange: hyperliquid, symbol: "BTC", channel: book }
    - { id: 1003, exchange: hyperliquid, symbol: "HYPE", channel: trades }

    # Deribit
    - { id: 2001, exchange: deribit, symbol: "BTC-PERPETUAL", channel: book }
    - { id: 2002, exchange: deribit, symbol: "ETH-PERPETUAL", channel: book }
    - { id: 2003, exchange: deribit, symbol: "BTC-PERPETUAL", channel: trades }

    # Binance (spot)
    - { id: 3001, exchange: binance, symbol: "BTCUSDT", channel: book }
    - { id: 3002, exchange: binance, symbol: "ETHUSDT", channel: book }
    - { id: 3003, exchange: binance, symbol: "BNBUSDT", channel: book }
    - { id: 3004, exchange: binance, symbol: "BTCUSDT", channel: trades }
    - { id: 3005, exchange: binance, symbol: "ETHUSDT", channel: trades }
    - { id: 3006, exchange: binance, symbol: "BNBUSDT", channel: trades }
